# 🎯 实时测试指南

## ✅ 准备工作已完成

- ✅ 旧版APP已卸载
- ✅ 最新APK已安装成功
- ✅ APP已启动
- ✅ 日志监控已开启

---

## 📱 现在请在手机上执行以下操作:

### 第1步: 授权蓝牙权限
应用启动后可能会请求以下权限:
- ✓ 蓝牙扫描权限
- ✓ 蓝牙连接权限  
- ✓ 位置权限

**请全部允许这些权限**

---

### 第2步: 点击"开始扫描"
1. 在APP主界面找到 **"开始扫描"** 按钮
2. 点击它开始扫描BLE设备
3. 等待几秒钟,设备列表会出现

**预期结果:**
- 按钮文字变为"停止扫描"
- 出现一个旋转的进度条
- 设备列表开始显示找到的设备

---

### 第3步: 寻找AQ打印机
在设备列表中找到:
```
AQ-V258000114(BLE)
CD:AC:B0:F0:31:FC
```

**这是您的AQ打印机!**

---

### 第4步: 连接AQ打印机 ⭐ 关键步骤
1. **点击** `AQ-V258000114(BLE)` 这个设备项
2. 会弹出对话框:
   ```
   ┌─────────────────────────────┐
   │      连接设备                │
   │                             │
   │ 检测到AQ设备,将使用SDK模式连接│
   │ 设备: AQ-V258000114(BLE)    │
   │                             │
   │   [连接]      [取消]        │
   └─────────────────────────────┘
   ```
3. **点击 [连接] 按钮**

**重要提示:**
- 如果对话框显示"使用SDK模式连接"说明识别正确! ✅
- 如果显示"标准模式连接"说明识别错误 ❌

---

### 第5步: 观察连接过程
连接时状态会变化:

1. **"连接中... (SDK模式)"** ⏳
   - 卡片背景: 橙色
   - 正在连接中...

2. **"已连接 (SDK模式 - 就绪)"** ✅
   - 卡片背景: 绿色
   - 弹出提示: "SDK连接成功,可以打印"
   - "测试打印"按钮变为可用(不再灰色)

**如果连接失败:**
- 显示: "连接失败 (SDK模式)"
- 卡片背景: 红色
- 请重新扫描并再次尝试连接

---

### 第6步: 测试打印 🖨️
1. 确认状态显示 **"已连接 (SDK模式 - 就绪)"**
2. 点击 **"测试打印"** 按钮
3. 会显示提示: "使用SDK打印测试页..."

**打印机应该开始打印!**

打印内容应该包括:
```
        打印测试页
        (居中,大字体)

--------------------------------
设备测试
时间: 2025-11-10 xx:xx:xx
--------------------------------
这是测试打印内容
数字: 1234567890
英文: ABCDEFGHIJKLMNOPQRSTUVWXYZ
小写: abcdefghijklmnopqrstuvwxyz
--------------------------------
中文测试: 你好世界
符号: !@#$%^&*()

    [条形码]
    12345678
```

---

## 📊 电脑端日志观察

我这边会看到以下日志:

**启动APP时:**
```
D PuQuPrinterManager: PuQuPrintManager 初始化完成
```

**扫描设备时:**
```
D BluetoothScanner: Started BLE scan
D BluetoothScanner: Found device: AQ-V258000114(BLE) (CD:AC:B0:F0:31:FC) RSSI: -69 ⚡ [AQ device]
D BluetoothScanner: Stopped BLE scan
```

**连接设备时 (重要!):**
```
D PuQuPrinterManager: 开始连接打印机: CD:AC:B0:F0:31:FC
D PuQuPrinterManager: 连接成功
```

**打印时 (重要!):**
```
D PuQuPrinterManager: 开始打印测试页
D PuQuPrinterManager: 测试页打印完成
```

---

## ⚠️ 故障排查

### 问题A: 看不到"开始扫描"按钮
**解决:** APP可能在后台,点击桌面图标重新打开

### 问题B: 扫描不到设备
**检查:**
1. 打印机是否开机
2. 打印机蓝牙是否开启
3. 是否授予了所有权限
4. 尝试重新扫描

### 问题C: 点击设备没有弹出对话框
**解决:**
1. 杀掉APP重新打开
2. 或者重新安装

### 问题D: 连接失败
**可能原因:**
1. 打印机被其他设备占用 → 关闭其他APP
2. 距离太远 → 靠近打印机
3. 蓝牙干扰 → 远离干扰源

### 问题E: 连接成功但打印没反应
**检查:**
1. 打印机是否有纸
2. 查看logcat是否有错误
3. 打印机温度是否正常

---

## ✅ 成功标志

如果看到以下情况,说明测试成功:

1. ✅ 对话框显示"SDK模式连接"
2. ✅ 连接状态显示"已连接 (SDK模式 - 就绪)"
3. ✅ 卡片背景是绿色
4. ✅ 点击"测试打印"后打印机开始打印
5. ✅ 打印内容清晰完整

---

## 🎉 测试完成后

如果一切正常,您已经成功:
- ✅ 集成了PUQU官方SDK
- ✅ 实现了智能设备识别
- ✅ AQ打印机可以正常打印了!

接下来可以:
- 修改打印内容
- 添加自定义打印模板
- 测试其他GP打印机(标准模式)

---

**现在请开始测试!**
**第一步: 点击手机上的"开始扫描"按钮** ⬅️ 从这里开始

---

**测试时间**: 2025-11-10 17:58
**监控状态**: ✅ 日志实时监控中
**我会看到您的每一步操作!** 👀
