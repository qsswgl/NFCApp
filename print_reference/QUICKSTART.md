# 🚀 快速开始 - 安装和测试

## ✅ 当前状态
- 📱 设备已连接: `192.168.1.152:45581`
- 📂 项目位置: `k:\Print`
- ✅ 所有源代码已生成

## 📦 安装方法（推荐使用方法1）

### 方法1️⃣: Android Studio（最简单）

1. **打开Android Studio**
2. **File → Open**
3. **选择目录**: `k:\Print`
4. **等待Gradle自动同步**（首次可能需要几分钟）
5. **点击运行按钮** ▶️ （或按 `Shift + F10`）
6. **选择设备**: `192.168.1.152:45581`
7. **等待安装完成**

✅ 完成！应用会自动安装并启动。

---

### 方法2️⃣: 命令行（需要配置Gradle）

如果你已经安装了Android SDK和Gradle：

```cmd
cd k:\Print
gradlew.bat assembleDebug
adb install -r app\build\outputs\apk\debug\app-debug.apk
```

---

## 🧪 测试步骤

安装成功后，在你的Android设备上：

### 第1步: 启动应用
- 在应用列表找到 **"BLE打印机"** 图标
- 点击启动

### 第2步: 授予权限
应用会请求以下权限：
- ✅ 蓝牙扫描权限
- ✅ 蓝牙连接权限  
- ✅ 位置权限（Android 11及以下需要）

**全部点击"允许"**

### 第3步: 启用蓝牙
- 如果蓝牙未启用，会弹出提示
- 点击"启用"

### 第4步: 扫描打印机
- 确保你的蓝牙打印机已开机
- 点击 **"开始扫描"** 按钮
- 等待设备列表出现打印机

### 第5步: 连接打印机
- 点击列表中的打印机设备
- 在弹出的对话框中点击 **"连接"**
- 等待连接状态变为 **"就绪(可以打印)"**

### 第6步: 测试打印
- 点击 **"测试打印"** 按钮
- 打印机应该会打印出测试小票

---

## 📋 测试小票内容

打印机会输出：
```
        测试打印
        
设备: BLE蓝牙打印机
时间: 2025-11-10 XX:XX:XX
--------------------------------
项目1: 测试商品A ¥10.00
项目2: 测试商品B ¥20.00
项目3: 测试商品C ¥30.00
--------------------------------
                  合计: ¥60.00

      谢谢惠顾!
```

---

## 🔧 故障排除

### ❌ 找不到设备
**原因**: 打印机未进入配对模式或蓝牙未开启
**解决**:
- 确保打印机电源开启
- 长按打印机配对键（通常是蓝牙图标键）
- 重启蓝牙后重新扫描

### ❌ 连接失败
**原因**: 打印机已与其他设备配对
**解决**:
- 在手机蓝牙设置中"忽略"该设备
- 重启打印机
- 重新扫描并连接

### ❌ 打印无响应
**原因**: 打印机UUID不匹配或无纸
**解决**:
- 检查打印机是否有纸
- 查看连接状态是否为"就绪"
- 如果状态正常但不打印，可能需要修改UUID配置

---

## 📱 查看调试日志

打开命令提示符或PowerShell：

```cmd
adb logcat | findstr "BluetoothScanner BluetoothConnection MainActivity"
```

或查看所有错误：
```cmd
adb logcat *:E
```

---

## 🎯 下一步

如果一切正常，你可以：

1. **自定义打印内容**: 编辑 `PrinterCommands.kt`
2. **调整UUID**: 如果连接失败，修改 `BluetoothConnectionManager.kt` 中的UUID
3. **添加新功能**: 在 `MainActivity.kt` 中扩展功能
4. **修改UI**: 编辑 `activity_main.xml`

---

## 📞 需要帮助？

- 查看 `README.md` - 完整项目文档
- 查看 `INSTALL.md` - 详细安装说明
- 运行 `install.bat` - 交互式安装向导

---

**祝测试顺利！🎉**
